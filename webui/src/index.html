<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebUI 管理面板</title>
    <link href="./mdb5/css/mdb.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <!-- 引入 Chart.js 用于绘制环形图 -->
    <script src="./chart/chart.umd.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">WebUI 管理面板</h1>

        <!-- 日志显示区域 -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">日志文件</h5>
            </div>
            <div class="card-body">
                <pre id="log-content" class="log-content"></pre>
            </div>
            <div class="card-footer">
                <!-- GC 状态显示 -->
                <div class="mb-3">
                    <p>f2fs当前段 (GC状态: <span id="gc-status">未知</span>)</p>
                </div>
                <!-- 环形图容器 -->
                <div class="mb-3">
                    <canvas id="segment-chart"></canvas>
                </div>
                <!-- 操作按钮 -->
                <div class="d-flex justify-content-start">
                    <button id="refresh-log" class="btn btn-primary btn-sm me-2">刷新日志</button>
                    <button id="delete-log" class="btn btn-danger btn-sm me-2">删除日志</button>
                    <button id="restart-module" class="btn btn-warning btn-sm">重启模块</button>
                </div>
            </div>
        </div>

        <!-- 规则文件编辑按钮 -->
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">规则文件编辑</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-column">
                    <button id="edit-blacklist1" class="btn btn-primary mb-3">编辑黑名单</button>
                    <button id="edit-blacklist2" class="btn btn-primary mb-3">过期文件黑名单</button>
                    <button id="edit-whitelist" class="btn btn-primary">编辑白名单</button>
                </div>
            </div>
        </div>

        <!-- 配置文件编辑区域 -->
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="mb-0">配置文件编辑</h5>
            </div>
            <div class="card-body">
                <form id="config-form">
                    <div class="form-group mb-3">
                        <label for="retention-days">保留天数</label>
                        <input type="number" class="form-control" id="retention-days" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="clean-interval">程序清理间隔秒数</label>
                        <input type="number" class="form-control" id="clean-interval" required>
                    </div>
                    <button type="submit" class="btn btn-primary mb-3">保存更改</button>
                    <div class="form-group mb-3">
                        <label>f2fs垃圾回收</label>
                        <div>
                            <!-- 开关按钮 -->
                            <input type="checkbox" id="f2fs-gc-toggle" class="btn-check" autocomplete="off">
                            <label id="f2fs-gc-toggle-label" class="btn btn-outline-secondary" for="f2fs-gc-toggle">关闭</label>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 引入 MDB5 -->
    <script src="./mdb5/js/mdb.umd.min.js"></script>
    <!-- 引入 scripts.js 作为模块 -->
    <script type="module" src="scripts.js"></script>
</body>
</html>
